# 리워드 가중치 정리표

## 전체 리워드 가중치 표

| 번호 | 리워드 이름 | 가중치 | 카테고리 | 상태 | 설명 |
|------|------------|--------|----------|------|------|
| 1 | `termination` | **-5.0** | 기본 | ✅ 활성 | 종료 패널티 |
| 2 | `alive` | **0.01** | 기본 | ✅ 활성 | 생존 보상 |
| 3 | `tracking_lin_vel` | **3.0** | 속도 추적 | ✅ 활성 | 선형 속도 추적 (sigma=0.25) |
| 4 | `tracking_ang_vel` | **0.3** | 속도 추적 | ✅ 활성 | 각속도 추적 (sigma=0.25) |
| 5 | `lin_vel_z` | **-1.0** | Body/Root | ✅ 활성 | Z축 선형 속도 패널티 |
| 6 | `ang_vel_xy` | **-0.05** | Body/Root | ✅ 활성 | XY축 각속도 패널티 |
| 7 | `orientation` | **-0.0** | Body/Root | ❌ 비활성 | 자세 패널티 |
| 8 | `base_height` | **0.00** | Body/Root | ❌ 비활성 | 기준 높이 (target=0.3536m) |
| 9 | `torques` | **-1.0e-5** | 관절 | ✅ 활성 | 토크 패널티 |
| 10 | `dof_vel` | **-5.0e-4** | 관절 | ✅ 활성 | 관절 속도 패널티 |
| 11 | `dof_acc` | **-2.5e-7** | 관절 | ✅ 활성 | 관절 가속도 패널티 |
| 12 | `joint_power` | **-2.5e-5** | 관절 | ✅ 활성 | 관절 전력 패널티 |
| 13 | `dof_pos_limits` | **-0.5** | 관절 | ✅ 활성 | 관절 위치 한계 패널티 |
| 14 | `action_rate` | **-0.01** | 액션 | ✅ 활성 | 액션 변화율 패널티 |
| 15 | `feet_air_time` | **0.0** | 발 | ❌ 비활성 | 발 공중 시간 (threshold=0.3, max=0.4) |
| 16 | `collision` | **-1.0** | 접촉 | ✅ 활성 | 충돌 패널티 (threshold=5.0N) |
| 17 | `feet_stumble` | **-0.0** | 발 | ❌ 비활성 | 발 걸림 |
| 18 | `stand_still` | **-0.0** | 기타 | ❌ 비활성 | 정지 상태 |

---

## 가중치 크기 순서 (절댓값 기준)

| 순위 | 리워드 이름 | 가중치 | 절댓값 | 상태 |
|------|------------|--------|--------|------|
| 1 | `termination` | -5.0 | **5.0** | ✅ 활성 |
| 2 | `tracking_lin_vel` | 3.0 | **3.0** | ✅ 활성 |
| 3 | `collision` | -1.0 | **1.0** | ✅ 활성 |
| 4 | `lin_vel_z` | -1.0 | **1.0** | ✅ 활성 |
| 5 | `dof_pos_limits` | -0.5 | **0.5** | ✅ 활성 |
| 6 | `tracking_ang_vel` | 0.3 | **0.3** | ✅ 활성 |
| 7 | `ang_vel_xy` | -0.05 | **0.05** | ✅ 활성 |
| 8 | `action_rate` | -0.01 | **0.01** | ✅ 활성 |
| 9 | `alive` | 0.01 | **0.01** | ✅ 활성 |
| 10 | `dof_vel` | -5.0e-4 | **0.0005** | ✅ 활성 |
| 11 | `joint_power` | -2.5e-5 | **0.000025** | ✅ 활성 |
| 12 | `torques` | -1.0e-5 | **0.00001** | ✅ 활성 |
| 13 | `dof_acc` | -2.5e-7 | **0.00000025** | ✅ 활성 |
| 14 | `orientation` | -0.0 | **0.0** | ❌ 비활성 |
| 15 | `base_height` | 0.00 | **0.0** | ❌ 비활성 |
| 16 | `feet_air_time` | 0.0 | **0.0** | ❌ 비활성 |
| 17 | `feet_stumble` | -0.0 | **0.0** | ❌ 비활성 |
| 18 | `stand_still` | -0.0 | **0.0** | ❌ 비활성 |

---

## 카테고리별 정리

### ✅ 활성화된 리워드 (12개)

#### 기본 (2개)
| 리워드 | 가중치 | 설명 |
|--------|--------|------|
| `termination` | -5.0 | 종료 패널티 (가장 큰 패널티) |
| `alive` | 0.01 | 생존 보상 |

#### 속도 추적 (2개)
| 리워드 | 가중치 | 파라미터 |
|--------|--------|----------|
| `tracking_lin_vel` | 3.0 | sigma=0.25 (가장 큰 보상) |
| `tracking_ang_vel` | 0.3 | sigma=0.25 |

#### Body/Root (2개)
| 리워드 | 가중치 | 설명 |
|--------|--------|------|
| `lin_vel_z` | -1.0 | Z축 선형 속도 패널티 |
| `ang_vel_xy` | -0.05 | XY축 각속도 패널티 |

#### 관절 (5개)
| 리워드 | 가중치 | 설명 |
|--------|--------|------|
| `dof_pos_limits` | -0.5 | 관절 위치 한계 패널티 |
| `dof_vel` | -5.0e-4 | 관절 속도 패널티 |
| `joint_power` | -2.5e-5 | 관절 전력 패널티 |
| `torques` | -1.0e-5 | 토크 패널티 |
| `dof_acc` | -2.5e-7 | 관절 가속도 패널티 (가장 작음) |

#### 액션 (1개)
| 리워드 | 가중치 | 설명 |
|--------|--------|------|
| `action_rate` | -0.01 | 액션 변화율 패널티 |

#### 접촉 (1개)
| 리워드 | 가중치 | 파라미터 |
|--------|--------|----------|
| `collision` | -1.0 | contact_force_threshold=5.0N |

---

### ❌ 비활성화된 리워드 (6개)

| 리워드 | 가중치 | 설명 |
|--------|--------|------|
| `orientation` | -0.0 | 자세 패널티 |
| `base_height` | 0.00 | 기준 높이 (target=0.3536m) |
| `feet_air_time` | 0.0 | 발 공중 시간 |
| `feet_stumble` | -0.0 | 발 걸림 |
| `stand_still` | -0.0 | 정지 상태 |

---

## 양수/음수 분류

### 양수 (보상) - 3개
| 리워드 | 가중치 |
|--------|--------|
| `tracking_lin_vel` | 3.0 |
| `tracking_ang_vel` | 0.3 |
| `alive` | 0.01 |

### 음수 (패널티) - 9개
| 리워드 | 가중치 |
|--------|--------|
| `termination` | -5.0 |
| `collision` | -1.0 |
| `lin_vel_z` | -1.0 |
| `dof_pos_limits` | -0.5 |
| `ang_vel_xy` | -0.05 |
| `action_rate` | -0.01 |
| `dof_vel` | -5.0e-4 |
| `joint_power` | -2.5e-5 |
| `torques` | -1.0e-5 |
| `dof_acc` | -2.5e-7 |

---

## 주요 특징

1. **가장 큰 영향력**
   - 보상: `tracking_lin_vel` (3.0) - 선형 속도 추적이 가장 중요
   - 패널티: `termination` (-5.0) - 종료가 가장 큰 패널티

2. **관절 관련 패널티**
   - 대부분 매우 작은 값 (10⁻⁵ ~ 10⁻⁷)
   - `dof_pos_limits` (-0.5)만 상대적으로 큼

3. **비활성화된 항목**
   - 발 관련 rewards 모두 비활성화 (`feet_air_time`, `feet_stumble`)
   - `base_height` 비활성화 (높이 제어 없음)
   - `orientation` 비활성화 (자세 제어 없음)

---

## 참고사항

- 모든 weight는 **dt를 곱하지 않은 원래 값**입니다
- Isaac Lab의 RewardManager가 자동으로 `weight × dt`를 적용합니다
- 파일 위치: `E2E_locomotion_v2/env_cfg.py` (338-513줄)
- 리워드 함수 위치: `E2E_locomotion_v2/mdp/rewards.py`
