# E2E_locomotion_v2 vs rl_training X30 Rewards ë¹„êµ

## ğŸ“Š ì „ì²´ ë¹„êµ ìš”ì•½

| ì¹´í…Œê³ ë¦¬ | E2E_locomotion_v2 | rl_training X30 | ì°¨ì´ì  |
|---------|-------------------|-----------------|--------|
| **ì´ Rewards ìˆ˜** | 14ê°œ | 20ê°œ | X30ì´ ë” ë§ìŒ |
| **ì†ë„ ì¶”ì ** | 2ê°œ | 2ê°œ | ìœ ì‚¬ |
| **ë°œ ê´€ë ¨** | 1ê°œ (ë¹„í™œì„±) | 7ê°œ | X30ì´ í›¨ì”¬ ìƒì„¸ |
| **Body/Root** | 5ê°œ | 4ê°œ | ìœ ì‚¬ |
| **ê´€ì ˆ** | 5ê°œ | 6ê°œ | ìœ ì‚¬ |
| **ì ‘ì´‰** | 0ê°œ (ì£¼ì„) | 2ê°œ | X30ë§Œ ìˆìŒ |

---

## 1. ğŸ¯ ì†ë„ ì¶”ì  (Velocity Tracking)

### E2E_locomotion_v2
| Reward | Weight | íŒŒë¼ë¯¸í„° |
|--------|--------|----------|
| `tracking_lin_vel` | **3.0** | `tracking_sigma=0.25` |
| `tracking_ang_vel` | **0.3** | `tracking_sigma=0.25` |

### rl_training X30
| Reward | Weight | íŒŒë¼ë¯¸í„° |
|--------|--------|----------|
| `track_lin_vel_xy_exp` | **3.5** | `std=sqrt(0.5)â‰ˆ0.707` |
| `track_ang_vel_z_exp` | **1.5** | `std=sqrt(0.5)â‰ˆ0.707` |

### ğŸ” ì°¨ì´ì 
1. **Weight ì°¨ì´**
   - ì„ í˜• ì†ë„: E2E `3.0` vs X30 `3.5` (X30ì´ ì•½ê°„ ë†’ìŒ)
   - ê°ì†ë„: E2E `0.3` vs X30 `1.5` (X30ì´ **5ë°°** ë†’ìŒ)

2. **íŒŒë¼ë¯¸í„° ì°¨ì´**
   - E2E: `tracking_sigma=0.25` (ì§ì ‘ ì‚¬ìš©)
   - X30: `std=sqrt(0.5)â‰ˆ0.707` (ì œê³± ì‚¬ìš©)
   - **E2Eê°€ ë” ì—„ê²©í•œ ì¶”ì ** (ì‘ì€ sigma = ë” ë¹ ë¥¸ ê°ì‡ )

3. **í•¨ìˆ˜ êµ¬í˜„**
   - E2E: `exp(-error / sigma)` (ì»¤ìŠ¤í…€)
   - X30: `exp(-error / stdÂ²)` (í‘œì¤€)

---

## 2. ğŸ¦¶ ë°œ ê´€ë ¨ (Feet-Related)

### E2E_locomotion_v2
| Reward | Weight | ìƒíƒœ |
|--------|--------|------|
| `feet_air_time` | **0.0** | âŒ ë¹„í™œì„±í™” |
| `feet_stumble` | **0.0** | âŒ ë¹„í™œì„±í™” |

### rl_training X30
| Reward | Weight | íŒŒë¼ë¯¸í„° |
|--------|--------|----------|
| `feet_air_time` | **5.0** âœ… | `threshold=0.5` |
| `feet_air_time_variance` | **-8.0** âš ï¸ | - |
| `feet_slide` | **-0.05** âš ï¸ | - |
| `feet_height` | **-0.2** âš ï¸ | `target_height=0.05` |
| `feet_height_body` | **-2.5** âš ï¸ | `target_height=-0.35` |
| `feet_gait` | **0.5** âœ… | ëŒ€ê°ì„  ë°œ ë™ê¸°í™” |
| `feet_contact_without_cmd` | **0.1** âœ… | - |

### ğŸ” ì°¨ì´ì 
1. **E2EëŠ” ë°œ ê´€ë ¨ rewardsê°€ ê±°ì˜ ì—†ìŒ**
   - `feet_air_time`ì´ ë¹„í™œì„±í™” (weight=0.0)
   - ë°œ ë³´í–‰ íŒ¨í„´ í•™ìŠµì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŒ

2. **X30ì€ ë°œ ë³´í–‰ì— ì§‘ì¤‘**
   - `feet_air_time` (5.0): í° ë³´ìƒ
   - `feet_air_time_variance` (-8.0): ê°€ì¥ í° íŒ¨ë„í‹° (ì¼ê´€ì„±)
   - `feet_gait` (0.5): ëŒ€ê°ì„  ë°œ ë™ê¸°í™”
   - ë°œ ë†’ì´, ë¯¸ë„ëŸ¬ì§ ë“± ìƒì„¸í•œ ì œì–´

3. **ë³´í–‰ íŒ¨í„´**
   - X30: ëŒ€ê°ì„  ë°œ ë™ê¸°í™” (`feet_gait`) ëª…ì‹œì 
   - E2E: ë³´í–‰ íŒ¨í„´ ê´€ë ¨ reward ì—†ìŒ

---

## 3. ğŸ“ Body/Root State Penalties

### E2E_locomotion_v2
| Reward | Weight | íŒŒë¼ë¯¸í„° |
|--------|--------|----------|
| `lin_vel_z` | **-1.0** | - |
| `ang_vel_xy` | **-0.05** | - |
| `orientation` | **-0.0** | âŒ ë¹„í™œì„±í™” |
| `base_height` | **0.01** âœ… | `target_height=0.38` |
| `termination` | **-5.0** | - |

### rl_training X30
| Reward | Weight | íŒŒë¼ë¯¸í„° |
|--------|--------|----------|
| `lin_vel_z_l2` | **-2.0** | - |
| `ang_vel_xy_l2` | **-0.05** | - |
| `flat_orientation_l2` | **-5.0** âš ï¸ | - |
| `base_height_l2` | **-10.0** âš ï¸ | `target_height=0.35` |

### ğŸ” ì°¨ì´ì 
1. **Base Height**
   - E2E: `0.01` (ì‘ì€ ë³´ìƒ) - ë†’ì´ ìœ ì§€ ë³´ìƒ
   - X30: `-10.0` (í° íŒ¨ë„í‹°) - ë†’ì´ ë²—ì–´ë‚¨ íŒ¨ë„í‹°
   - **ì ‘ê·¼ ë°©ì‹ì´ ë°˜ëŒ€!**
   - Target height: E2E `0.38m` vs X30 `0.35m`

2. **Orientation**
   - E2E: `-0.0` (ë¹„í™œì„±í™”)
   - X30: `-5.0` (í° íŒ¨ë„í‹°) - ìì„¸ ìœ ì§€ ì¤‘ìš”

3. **Zì¶• ì†ë„**
   - E2E: `-1.0`
   - X30: `-2.0` (2ë°° ë” ì—„ê²©)

4. **Termination**
   - E2E: `-5.0` (ëª…ì‹œì )
   - X30: `is_terminated` (0.0, ë¹„í™œì„±í™”)

---

## 4. ğŸ”§ ê´€ì ˆ ê´€ë ¨ (Joint-Related)

### E2E_locomotion_v2
| Reward | Weight | ê´€ì ˆ |
|--------|--------|------|
| `torques` | **-1.0e-5** | ëª¨ë“  ë‹¤ë¦¬ ê´€ì ˆ |
| `dof_vel` | **-5.0e-4** | ëª¨ë“  ë‹¤ë¦¬ ê´€ì ˆ |
| `dof_acc` | **-2.5e-7** | ëª¨ë“  ë‹¤ë¦¬ ê´€ì ˆ |
| `joint_power` | **-2.5e-5** | ëª¨ë“  ë‹¤ë¦¬ ê´€ì ˆ |
| `dof_pos_limits` | **-0.5** | ëª¨ë“  ë‹¤ë¦¬ ê´€ì ˆ |

### rl_training X30
| Reward | Weight | ê´€ì ˆ |
|--------|--------|------|
| `joint_torques_l2` | **-2.5e-5** | ëª¨ë“  ê´€ì ˆ |
| `joint_acc_l2` | **-1e-8** | ëª¨ë“  ê´€ì ˆ |
| `joint_deviation_l1` | **-0.5** | HipXë§Œ |
| `joint_power` | **-2e-5** | ëª¨ë“  ê´€ì ˆ |
| `joint_pos_limits` | **-5.0** âš ï¸ | ëª¨ë“  ê´€ì ˆ |
| `joint_mirror` | **-0.05** | ëŒ€ê°ì„  ëŒ€ì¹­ |

### ğŸ” ì°¨ì´ì 
1. **Torques**
   - E2E: `-1.0e-5` (ë” ì‘ì€ penalty)
   - X30: `-2.5e-5` (2.5ë°°)

2. **Joint Power**
   - E2E: `-2.5e-5`
   - X30: `-2e-5` (ê±°ì˜ ìœ ì‚¬)

3. **Joint Position Limits**
   - E2E: `-0.5`
   - X30: `-5.0` (**10ë°°** ë” ì—„ê²©!)

4. **Joint Velocity**
   - E2E: `-5.0e-4` (ëª…ì‹œì )
   - X30: ì—†ìŒ (ë¹„í™œì„±í™”)

5. **Joint Deviation**
   - E2E: ì—†ìŒ
   - X30: `-0.5` (HipXë§Œ, ê¸°ë³¸ ìœ„ì¹˜ ìœ ì§€)

6. **Joint Mirror**
   - E2E: ì—†ìŒ
   - X30: `-0.05` (ëŒ€ê°ì„  ëŒ€ì¹­ì„±)

---

## 5. ğŸ® ì•¡ì…˜ ê´€ë ¨ (Action)

### E2E_locomotion_v2
| Reward | Weight |
|--------|--------|
| `action_rate` | **-0.01** |

### rl_training X30
| Reward | Weight |
|--------|--------|
| `action_rate_l2` | **-0.02** |

### ğŸ” ì°¨ì´ì 
- E2E: `-0.01`
- X30: `-0.02` (2ë°° ë” ì—„ê²©)

---

## 6. ğŸ‘£ ì ‘ì´‰ ê´€ë ¨ (Contact)

### E2E_locomotion_v2
| Reward | Weight | ìƒíƒœ |
|--------|--------|------|
| `collision` | - | âŒ ì£¼ì„ ì²˜ë¦¬ |

### rl_training X30
| Reward | Weight | íŒŒë¼ë¯¸í„° |
|--------|--------|----------|
| `contact_forces` | **-0.1** | `threshold=100.0` |
| `undesired_contacts` | **-0.5** | ë°œ ì œì™¸ ë¶€ìœ„ |

### ğŸ” ì°¨ì´ì 
- E2E: ì ‘ì´‰ ê´€ë ¨ reward ì—†ìŒ (ì£¼ì„ ì²˜ë¦¬)
- X30: ì ‘ì´‰ í˜ê³¼ ì›í•˜ì§€ ì•ŠëŠ” ì ‘ì´‰ ëª¨ë‘ íŒ¨ë„í‹°

---

## 7. ğŸ›‘ ê¸°íƒ€

### E2E_locomotion_v2
| Reward | Weight |
|--------|--------|
| `alive` | **0.01** |
| `stand_still` | **-0.0** (ë¹„í™œì„±) |

### rl_training X30
| Reward | Weight |
|--------|--------|
| `stand_still` | **-0.5** |
| `feet_contact_without_cmd` | **0.1** |

---

## ğŸ“Š ì£¼ìš” ì°¨ì´ì  ìš”ì•½

### 1. ë°œ ë³´í–‰ íŒ¨í„´
- **E2E**: ë°œ ê´€ë ¨ rewards ê±°ì˜ ì—†ìŒ (ë¹„í™œì„±í™”)
- **X30**: ë°œ ë³´í–‰ì— ì§‘ì¤‘ (7ê°œ rewards, í° weights)

### 2. Base Height ì ‘ê·¼
- **E2E**: ë³´ìƒ ë°©ì‹ (`0.01`) - ë†’ì´ ìœ ì§€ ì‹œ ë³´ìƒ
- **X30**: íŒ¨ë„í‹° ë°©ì‹ (`-10.0`) - ë†’ì´ ë²—ì–´ë‚¨ ì‹œ í° íŒ¨ë„í‹°

### 3. ê´€ì ˆ í•œê³„
- **E2E**: `-0.5` (ê´€ëŒ€)
- **X30**: `-5.0` (ë§¤ìš° ì—„ê²©, 10ë°°)

### 4. ìì„¸ ìœ ì§€
- **E2E**: `-0.0` (ë¹„í™œì„±í™”)
- **X30**: `-5.0` (í° íŒ¨ë„í‹°)

### 5. ê°ì†ë„ ì¶”ì 
- **E2E**: `0.3` (ì‘ìŒ)
- **X30**: `1.5` (5ë°° ë†’ìŒ)

### 6. ë³´í–‰ íŒ¨í„´
- **E2E**: ë³´í–‰ íŒ¨í„´ ê´€ë ¨ reward ì—†ìŒ
- **X30**: `feet_gait` (0.5), `joint_mirror` (-0.05) - ëŒ€ê°ì„  ë°œ ë™ê¸°í™”

---

## ğŸ’¡ ê°œì„  ì œì•ˆ (E2E_locomotion_v2 ê¸°ì¤€)

### 1. ë°œ ë³´í–‰ íŒ¨í„´ ì¶”ê°€
```python
feet_air_time.weight = 2.0  # í™œì„±í™”
feet_air_time_variance.weight = -4.0  # ì¶”ê°€
feet_gait.weight = 0.3  # ì¶”ê°€
```

### 2. Base Height ì¡°ì •
```python
# ì˜µì…˜ 1: íŒ¨ë„í‹° ë°©ì‹ (X30 ìŠ¤íƒ€ì¼)
base_height.weight = -5.0

# ì˜µì…˜ 2: í˜„ì¬ ë°©ì‹ ìœ ì§€í•˜ë˜ weight ì¦ê°€
base_height.weight = 0.1
```

### 3. ê´€ì ˆ í•œê³„ ê°•í™”
```python
dof_pos_limits.weight = -2.0  # í˜„ì¬ -0.5ì—ì„œ ì¦ê°€
```

### 4. ìì„¸ ìœ ì§€ í™œì„±í™”
```python
orientation.weight = -2.0  # í˜„ì¬ -0.0ì—ì„œ í™œì„±í™”
```

### 5. ê°ì†ë„ ì¶”ì  ê°•í™”
```python
tracking_ang_vel.weight = 1.0  # í˜„ì¬ 0.3ì—ì„œ ì¦ê°€
```

---

## ğŸ“ˆ Weight ë¹„êµ ê·¸ë˜í”„

### ì†ë„ ì¶”ì 
```
E2E:  [=====] 3.0  [=] 0.3
X30:  [======] 3.5  [=====] 1.5
```

### ë°œ ê´€ë ¨ (ìµœëŒ€ê°’)
```
E2E:  [ ] 0.0
X30:  [==========] 5.0
```

### Base Height
```
E2E:  [=] 0.01 (ë³´ìƒ)
X30:  [==========] -10.0 (íŒ¨ë„í‹°)
```

### ê´€ì ˆ í•œê³„
```
E2E:  [==] -0.5
X30:  [==========] -5.0
```

---

## ğŸ¯ ê²°ë¡ 

### E2E_locomotion_v2ì˜ íŠ¹ì§•
- âœ… ê°„ë‹¨í•œ reward êµ¬ì¡°
- âœ… ì†ë„ ì¶”ì  ì¤‘ì‹¬
- âŒ ë°œ ë³´í–‰ íŒ¨í„´ í•™ìŠµ ë¶€ì¡±
- âŒ ìì„¸ ìœ ì§€ ë¹„í™œì„±í™”

### rl_training X30ì˜ íŠ¹ì§•
- âœ… ë°œ ë³´í–‰ íŒ¨í„´ì— ì§‘ì¤‘
- âœ… ì•ˆì •ì„± ê°•ì¡° (ë†’ì´, ìì„¸)
- âœ… ê´€ì ˆ í•œê³„ ì—„ê²©
- âœ… ëŒ€ê°ì„  ë°œ ë™ê¸°í™”

### ê¶Œì¥ ì‚¬í•­
E2E_locomotion_v2ì—ì„œ X30 ìŠ¤íƒ€ì¼ì˜ ë°œ ë³´í–‰ rewardsë¥¼ ì¶”ê°€í•˜ë©´ ë³´í–‰ ì„±ëŠ¥ì´ í–¥ìƒë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
